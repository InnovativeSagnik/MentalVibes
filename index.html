<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>MentalVibes</title>
  <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@500&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Sacramento&display=swap" rel="stylesheet">
  <style>
    body {
      margin: 0;
      font-family: 'Quicksand', sans-serif;
      background-image: url('peace1.png');
      background-size: cover;
      background-attachment: fixed;
      background-repeat: no-repeat;
      background-position: center;
      overflow-x: hidden;
      color: #333;
    }

    header, footer {
      background: rgba(255, 255, 255, 0.8);
      text-align: center;
      padding: 1rem;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
    }

    h1 {
      color: #4c6e72;
      font-size: 2.5rem;
    }

    p {
      color: #6c8b8f;
    }

    .resources, .reviews-section {
      background: rgba(255, 255, 255, 0.85);
      margin: 2rem auto;
      padding: 2rem;
      border-radius: 1rem;
      width: 80%;
      text-align: center;
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
    }

    .chatbot-container {
      position: fixed;
      bottom: 20px;
      right: 70px;
      z-index: 9999;
    }

    .audio-control {
      position: fixed;
      top: 50%;
      left: 0;
      transform: translateY(-50%);
      writing-mode: vertical-rl;
      text-align: center;
      padding: 1rem;
      background: rgba(255, 255, 255, 0.85);
      border-radius: 0 1rem 1rem 0;
      box-shadow: 2px 2px 10px rgba(0,0,0,0.2);
    }

    input[type=range] {
      transform: rotate(180deg);
      background: #e1f0f1;
    }

    .submit-review input, .submit-review textarea, .submit-review button, .submit-review select {
      display: block;
      width: 100%;
      margin-top: 0.5rem;
      padding: 0.5rem;
      border-radius: 5px;
      border: 1px solid #ccc;
    }

    .rating-display {
      margin-top: 2rem;
      text-align: center;
    }

    .rating-row {
      display: flex;
      align-items: center;
      margin: 8px 0;
      gap: 10px;
    }

    .star-label {
      width: 50px;
      text-align: right;
      font-weight: bold;
      color: #4c6e72;
    }

    .rating-bar {
      background-color: #e1f0f1;
      flex-grow: 1;
      height: 15px;
      border-radius: 10px;
      overflow: hidden;
      position: relative;
    }

    .rating-bar span {
      display: block;
      height: 100%;
      background-color: #77c8a1;
    }

    .rating-count {
      width: 30px;
      text-align: left;
    }

    button {
      background-color: #77c8a1;
      color: #fff;
      border: none;
      padding: 1rem;
      border-radius: 5px;
      cursor: pointer;
      transition: background-color 0.3s ease;
    }

    button:hover {
      background-color: #63a78d;
    }

    footer p {
      font-family: 'Sacramento', cursive;
      font-size: 2rem;
    }
  </style>
</head>
<body>
  <header>
    <h1>Welcome to MentalVibes</h1>
    <p>Your AI-powered companion for emotional and mental well-being. Created with care by <strong>Sagnik Pramanik</strong>.</p>
  </header>

  <div class="resources">
    <h2>Helpful Resources</h2>
    <p><strong>ðŸŒ¿ Breathing Exercises:</strong> Inhale 4s, Hold 4s, Exhale 4s.</p>
    <p><strong>ðŸŒ» Affirmations:</strong> "I am calm, I am safe."</p>
    <p><strong>ðŸŒŸ Sleep Tips:</strong> No screens 30 minutes before bed.</p>
  </div>

  <div class="reviews-section">
    <h2>User Reviews</h2>
    <div class="submit-review">
      <input type="text" id="username" placeholder="Your name" />
      <select id="rating">
        <option value="">Rate</option>
        <option value="1">1 - Poor</option>
        <option value="2">2 - Fair</option>
        <option value="3">3 - Good</option>
        <option value="4">4 - Very Good</option>
        <option value="5">5 - Excellent</option>
      </select>
      <textarea id="comment" placeholder="Leave a review..."></textarea>
      <button onclick="submitReview()">Submit</button>
    </div>

    <div id="reviews"></div>

    <div class="rating-display">
      <h3 style="font-size: 2.5rem; color: #4c6e72;">
        <span id="average-rating">0.0</span> â˜…
      </h3>
      <p style="color: #6c8b8f;">Based on <span id="total-reviews">0</span> reviews</p>
      <div class="rating-bar-container">
        <div class="rating-row"><span class="star-label">5 â˜…</span><div class="rating-bar"><span id="bar-5" style="width: 0%;"></span></div><span id="count-5" class="rating-count">0</span></div>
        <div class="rating-row"><span class="star-label">4 â˜…</span><div class="rating-bar"><span id="bar-4" style="width: 0%;"></span></div><span id="count-4" class="rating-count">0</span></div>
        <div class="rating-row"><span class="star-label">3 â˜…</span><div class="rating-bar"><span id="bar-3" style="width: 0%;"></span></div><span id="count-3" class="rating-count">0</span></div>
        <div class="rating-row"><span class="star-label">2 â˜…</span><div class="rating-bar"><span id="bar-2" style="width: 0%;"></span></div><span id="count-2" class="rating-count">0</span></div>
        <div class="rating-row"><span class="star-label">1 â˜…</span><div class="rating-bar"><span id="bar-1" style="width: 0%;"></span></div><span id="count-1" class="rating-count">0</span></div>
      </div>
    </div>
  </div>

  <div class="chatbot-container" id="chatbotContainer">
    <script async type='module' src='https://interfaces.zapier.com/assets/web-components/zapier-interfaces/zapier-interfaces.esm.js'></script>
    <zapier-interfaces-chatbot-embed is-popup='true' chatbot-id='cm99clg70007716o7mauyu3yb' id="chatbot"></zapier-interfaces-chatbot-embed>
  </div>

  <div class="audio-control">
    <audio id="peaceAudio" loop>
      <source src="please-calm-my-mind-125566.mp3" type="audio/mpeg">
      Your browser does not support the audio element.
    </audio>
    <input type="range" min="0" max="1" step="0.01" value="0.3" id="volumeSlider">
  </div>

  <footer>
    <p>@Sagnik Pramanik</p>
  </footer>

  <script>
  const audio = document.getElementById("peaceAudio");
  const slider = document.getElementById("volumeSlider");

  // Set initial volume
  audio.volume = slider.value;

  // Update volume on slider input
  slider.addEventListener("input", () => {
    audio.volume = slider.value;
  });

  // Try to autoplay when page is ready (some browsers block it unless muted)
  window.addEventListener("load", () => {
    const tryPlay = () => {
      audio.play().catch(() => {
        // If autoplay fails, wait for first user interaction
        document.body.addEventListener("click", () => {
          if (audio.paused) {
            audio.play().catch(console.error);
          }
        }, { once: true });
      });
    };

    // Delay slightly to improve success on some browsers
    setTimeout(tryPlay, 500);
  });
</script>
</body>
</html>
